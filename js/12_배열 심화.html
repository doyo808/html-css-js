<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <h3># 배열 멋있게 다루기</h3>

    <script>
        // arr.forEach(콜백함수) : 배열의 모든 값을 활용하여 전달한 함수를 실행한다
        const arr = [1, 2, 3, 4, 5, 6];
        arr.forEach( (value, index, original) => {
            console.log(`값은 ${value}이고 ${index}번째 요소입니다.`);
            console.log(`원본 배열은 ${original}입니다.`); // 선택요소
        } );

        
        // 배열.map(callbackFn) : 배열의 모든 값으로 콜백을 실행한 결과
        // 로 이루어진 새 배열을 반환
        const scores = [90, 91, 75, 67, 66, 45, 61];
        const result = scores.map(score => score >= 70 ? 'pass' : 'fail');
        console.log(result);

        // 연습: scores 배열로 grades 배열을 생성해보세요

        function scoreToGrade (score) {
            if (score > 100 || score < 0 || !Number.isInteger(score)) return '오류'

            else if (score >= 90) return 'A';
            else if (score >= 80) return 'B';
            else if (score >= 70) return 'C';
            else if (score >= 60) return 'D';
            else return 'F';
        }
        const grades = scores.map(score => scoreToGrade(score));
        console.log(grades);

        // 연습2: 다음 객체 배열에 평균 점수를 추가한 새로운 배열을 만들어보세요
        const students = [
            {
                name: '유재석',
                kor: 90,
                eng: 88,
                math: 80
            },
            {
                name: '빌 게이츠',
                kor: 15,
                eng: 100,
                math: 99
            },
            {
                name: '마이클 조던',
                kor: 33,
                eng: 45,
                math: 13
            }
        ]

        
        function studentPlusAvg(student) {
            let student2 = {
                name: student.name,
                kor: student.kor,
                eng: student.eng,
                math: student.math,
                avg: (student.kor + student.eng + student.math) / 3
            };
            return student2;
        }

        const students2 = students.map(student => studentPlusAvg(student));
        console.log(students2);

        const getTotal = stu => stu.kor + stu.eng + stu.math;
        const getAvg = stu => getTotal(stu) / 3;
        // ...으로 배열 뿐 아니라 객체로 풀어서 사용할 수 있다
        // 화살표 함수의 리턴 축약 버전으로 객체를 리턴하기 위해서는 {}를 괄호로 감싸주어야 한다
        const students3 = students.map(stu => ({
            ...stu, 
            avg: getAvg(stu),
            total: getTotal(stu)
        }));
        console.log(students3);

        // arr.filter(callback): 모든 값들로 콜백을 실행한 결과가 true인 
        // 요소만 남긴 새 배열을 반환하는 메서드
        const filtered = students3.filter(stu => stu.avg >= 50);
        console.log(filtered);

        const snacks = ['초코파이', '엄마손파이', '포테토칩', '포카칩'
            , '웰치스', '제로콜라', '초코하임', '치토스'];

        const pies = snacks.filter(snack => snack.endsWith('파이'));
        console.log(pies);

        // 배열을 리턴하는 메서드의 경우 체이닝이 가능하다
        snacks
            .filter(snack => snack.endsWith('칩'))
            .forEach(snack => console.log('남은과자:', snack));

        // arr.reduce(callback): 배열의 모든 값을 활용하여 하나의 결과를 도출
        // callback의 첫 번째 인자로는 누적값, 두 번째 인자는 현재 값이 온다
        const totalScore = scores.reduce((acc, curr, index, scores) => {
            console.log('acc:', acc);
            console.log('curr:', curr);
            console.log('index:', index);
            console.log('origin', origin);

            return acc + curr; // 여기서 리턴하는 값이 계속 누적
        });

        console.log('총합:', totalScore);

        const bestScore = scores.reduce((acc,curr) => acc < curr ? curr : acc);
        console.log(bestScore);

        
    </script>
</body>
</html>