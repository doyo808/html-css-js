<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
    <h3># 자바스크립트 객체의 메서드 활용하기</h3>

    <script>
        // 객체의 필드에 함수를 정의해 넣어놓으면 메서드가 된다
        // 메서드는 this를 통해 해당 객체의 필드값을 활용할 수 있다
        const cat = {
            name: '애옹이',
            age: 5,
            leg_str: 10,
            jump: function() {
                console.log(`${this.name}가 ${this.leg_str}만큼의 높이를 뛰었습니다.`);
            }
        };
        cat.jump();

        // 이미 만들어져 있는 객체에 메서드 추가하기
        cat.hide = function() {
            console.log(`${this.name}가 잘 숨었습니다.`);
        }
        cat.hide();

        // 화살표 함수는 본인의 영역을 가지지 못하므로 선언하는 시점에 this가 {}바깥의 영역을 의미한다
        cat.run = () =>{
            console.log(`${this.name}가 우다다 달렸습니다.`);
            console.log(this);
        }
        cat.run();

        // 객체의 메서드를 정의할 때 단축 문법을 사용할 수 있다
        const shark = {
            name: '상상어',
            bite(target) {
                console.log(`${this.name}가 ${target}을(를) 물었습니다.`);
            },
            swim(how) {
                // 메서드 내부에서는 함수를 정의해서 쓸 때 화살표 함수를 사용해야 문제가 안생긴다
                // (function 사용시 this가 올바르게 작동하지 않음)
                const doSwim = () => {
                      console.log(`${this.name}가 ${how}수영을 합니다.`);
                };
                doSwim();
            }
        }
        shark.bite('미역');
        shark.swim('팔딱');

        // 연습문제: 다음과 같이 코드가 진행되었을때 올바르게 동작하는 객체를 만들어보세요
        
        // elevator.down().down().show(); 출력: 현재 B2층입니다.
        // elevator.up().up().up().show(); 출력: 현재 2층입니다.
        // # 4층은 F층으로 출력되어야 함
        
        elevator = {
            floor: 1,
            floorMax: 20,
            floorMin: -9,

            downFloors(num) {
                if (num <= 0 || !Number.isInteger(num)) {
                    console.log('양의 정수를 입력하세요.');

                } else {

                    if (this.floor - num < this.floorMin) {
                        console.log(`더 내려갈 수 없습니다. 최하층: B${this.floorMin * -1 + 1}`);
                    }
                    this.floor = Math.max(this.floorMin, this.floor - num);
                }
                return this;
            },
            down() {
                return this.downFloors(1);
            },
            
            upFloors(num) {
               if (num <= 0 || !Number.isInteger(num)) {
                    console.log('양의 정수를 입력하세요.');

                } else {

                    if (this.floor + num > this.floorMax) {
                        console.log(`더 올라갈 수 없습니다. 최상층: ${this.floorMax}`);
                    } 
                    this.floor = Math.min(this.floorMax, this.floor + num);
                }
                return this;
            },
            up() {
                return this.upFloors(1);
            },
            
            show() {
                let floor2 = this.floor;
                
                if (floor2 === 4) { floor2 = 'F'; }
                else if (floor2 <= 0) {
                    floor2 = `B${floor2 * -1 + 1}`;
                }

                console.log(`현재 ${floor2}층 입니다.`);
            }
        }

        elevator.show();
        elevator.up().up().up().show();
        elevator.down().down().down().down().show();
        elevator.downFloors(100).show();
        elevator.upFloors(10).show();

        //
        const elevator2 = {
            floor: 3,
            floor_name: ['B3', 'B2', 'B1', '1', '2', '3', 'F', '5', '6', '7'],

            down() {
                if (this.floor > 0) {
                    --this.floor;
                }
                return this;
            },
            up() {
                if (this.floor < this.floor_name.length) {
                    ++this.floor;
                }
                return this;
            },
            show() {
                console.log(`현재 ${this.floor_name[this.floor]}층입니다.`);
            }
        }
        
        elevator2.up().show();
        elevator2.down().down().show();
        
    </script>
</body>
</html>